#!/bin/bash

# 路线计算过滤逻辑修复提交脚本
echo "🔧 开始提交路线计算过滤逻辑修复..."

# 添加所有更改
git add .

# 提交更改
git commit -m "修复路线计算中已出库订单过滤逻辑

问题修复:
- 修复路线计算API (/api/calculate-routes) 中的过滤逻辑
- 修复订单状态API (/api/order-status) 中的过滤逻辑
- 现在正确从order.gudangOut字段获取出库状态，而不是order.fields['Gudang OUT']
- 保持向后兼容性，支持从fields对象获取数据

技术改进:
- 统一了前端和后端的数据字段访问方式
- 确保已出库订单(gudangOut = '✅')正确被过滤出路线计算
- 路线优化现在只处理未出库的红色标记订单

预期效果:
- 左侧统计面板显示正确的已出库数量
- 路线计算面板显示正确的已出库订单数
- 路线优化只计算红色标记(未出库)的订单
- 灰色标记(已出库)的订单不参与路线计算"

# 推送到远程仓库
git push origin main

echo "✅ 路线过滤逻辑修复已成功推送到GitHub!"
echo "🔄 Render服务将自动部署更新..."
echo "�� 修复后路线计算将正确过滤已出库订单" 